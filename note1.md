# OOP-python面向对象
- 面向对象编程
    - 基础
    - 共有私有
    - 继承
    - 集合, Mixin
- 魔法函数
    - 概述
    - 构造类魔法函数
    - 运算类魔法函数
    
# 1.面向对象基础(ObjectOriented)
- OOP思想
    - 接触到一个任务,首先想到的是这个任务世界的构成
- 几个名词
    - OO:面向对象
    - OOA:面向对象的分析
    - OOD:面向对象的设计
    - OOI:xxx的实现
    - OOP:xxx的编程
    - OOA -> OOD -> OOI:面向对象实现过程
- 类和对象概念
    - 类:抽象名词,代表一个集合,共性的事物
    - 对象:具象的事物
    - 类和对象的关系
        - 一个具象,一个抽象
- 类中的内容
    - 表明事物的特征,叫属性(变量)
    - 表明事物的动作和功能,称为成员方法(函数)
    
# 2.类的基本实现
- 类的命名
    - 遵守变量命名的规范
    - 大驼峰
    - 避开系统命名
- 如何声明一个类
    - class
    - 仅由属性和方法构成
    - 属性定义可以直接用变量赋值,如果没有值赋,就用None
    - 案例 01.py
- 实例化类
    - 变量 = 类名()
- 访问对象成员
    - 使用点操作符
                
                obj.属性
                obj.方法
- 通过默认内置变量检查类和对象的所有成员
    - 对象所有成员
    
                # obj.__dict__
    - 类的所有成员
                
                # class_name.__dict__

# 3.Anaconda使用
- conda list     显示用户列表
- conda env list    显示环境列表
- conda cteate -n xxx python=3.6    创建一个环境
- activate xxx   激活虚拟环境

# 4.类和对象的成员分析
- 类和对象都可以存储成员(变量)
- 独享存储成员是存储在当前对象中
- 用对象访问成员时,如果对象没有,就访问类中的
- 如果对象中有,则一定使用对象中的
- 创建对象是创建一个空对象,如果通过对象对成员重新赋值或创建新的成员
- ,则会将成员保存在对象中

# 5.self
- self不是关键字,可以改成其他字符
- self在方法中表示对象本身,它会用对象名替换自己
- 方法中,如果有self,则方法称为非绑定类的方法,没有就是绑定类的方法,只能通过类来调用
- 如果方法中需要调用类中的成员,则用__class__访问
- 一些例子见02.py,另一些见丘比特lesson10
- 以下例子见丘比特

# 6.面向对象三大特性
- 封装
- 继承
- 多态

## 6.1.封装
- 封装是对对象的成员访问进行限制
- 封装三个级别:
    - 公开     public
    - 受保护   protected
    - 私有     private
    - 这三个不是关键字
- 判别对象的位置
    - 对象内部
    - 对象外部
    - 子类中
- 私有
    - 私有成员是最高级别封装,只能在当前类或对象中访问
    - 使用方法
                
                class Person():
                    name = "sundana"
                    __age = 20
                # name是公有(默认),age为私有
                
    - Python中私有不是真私有,事实上编译器将私有变量改了个名,那你就不好(直接)调用了
    - 叫name mangling
- 受保护的
    - 进行一定的封装,在类和子类中可以访问,外部不能访问
    - 使用方法,一个下划线
    - [python中下划线的使用]
- 公有
    - 任何地方都可以访问
 
## 6.2继承(例见lesson11)
- 继承是一个类可以获得另外一个类的方法和属性
- 好处: 减少代码,可以设置类与类的关系
- 继承与被继承
    - 被继承的类: 父类, 基类, 超类
    - 继承类: 子类, 派生类
    - 继承与被继承一定遵循is-A关系
- 继承的特征
    - 所有类都继承自object类
    - 子类可以继承父类中出私有外的所有内容
    - 子类不是创建新的空间存放父类内容,而是两者指向同一内容
    - 子类中可以创建独有的属性方法
    - 如果子类中有和父类相同名称的属性方法,优先使用子类
    - (其实是谁离调用处进用谁)
    - 子类如果想扩充父类的方法,可以在定义新方法的同时访问父类成员来减少代码
    - 调用父类成员方法:   父类名.成员   或      super().父类成员
- 继承变量函数的查找顺序问题
    - 优先查找自己的变量
    - 没有则查找父类的
    - 构造函数如果子类中没有,则查找父类的构造函数,有则用自己的
    
### 构造函数
- 在类实例化之前调用的函数
- 构造函数调用的参数要与定义的一致
- 子类没有调用父类,只调用一次不在向上查找

### super()
- super()是一个类 
- super()的作用是获取MRO列表中的第一个类,这个类大多时候是父类
- 所以super()与父类没有关系,只是通过它调用父类
- super使用方法.....

### 单继承与多继承
- 单继承一个子类只有一个父类,多继承则....
- 优缺点:
    - 单继承:清晰简单,但功能有限制
    - 多继承:功能扩展方便,但继承关系混乱(一般不推荐)
- 菱形继承/钻石继承
    - 当一个多继承的子类想继承各父类中相同的方法,则会出现取舍问题[MRO],比较麻烦
- MRO
    - MRO是多继承中,用于保存继承顺序的一个列表
    - py本身采用C3算法计算顺序
        - 子类永远在父类前面
        - 如果多个父类,则根据继承语法中括号内的类的书写顺序存放
        - 如果多个类继承了同一个或几个父类,孙子类中只继承第一个父类的父类

# 3.3 多态
- 多态就是同一个对象在不同情况下有不同状态出现
- py中多态不是语法,而是一种设计思想
- 区分
    - 多态性: 一种调用方式,多种执行效果
    - 多态: 同一种事物多种状态
- .MiXin设计模式
    - 主要采用多继承对类的功能进行扩展
    - 查阅[MiXin概念,模式] [MiXin与MRO] 
- 使用MiXin实现多继承的时候要非常小心
    - 首先必须表示某一单一功能,而不是将一个物体的所有功能放在一个中
    - 职责必须单一,如果要多个功能,则写多个MiXin
    - MiXin不能依赖于子类实现
    - 子类即使没有继承MiXin类, 也能正常工作,只是少了功能而已
- 优点
    - 扩充功能
    - 组织维护方便,任意调整
    - 避免继承更多的类
    
# 4. 类相关函数(见例)
- issubclass:检查一个类是不是另一个的子类
- isinstance:检测一个对象是否为一个类的实例
- hasattr:检测一个对象是否有成员
- getattr:
- setattr:
- delattr:
- dir: 获取成员列表

# 5. 类的成员描述符(属性)     (例见lesson13)
- 属性是对类中成员的第二次操作(常用于数据清洗)
    - get,读取属性
    - set,修改或添加属性操作
    - delet,删除属性操作
- 使用属性的方法:
    - 使用类实现描述其
    - 使用属性修饰符
    - 使用property函数
        - property(fget, fset, fdel, doc)
- 无论哪种使用属性方式都是为了修饰成员
    - 类的方式: 适合多个类中多个属性共用一个描述符
    - property: 适合当前类中使用,可以控制一个类中多个属性
    - 属性修饰符: 在当前类中使用,控制一个类中一个属性

# 6. 类的内置属性
- __dict__ :以字典形式显示类的成员属性
- __doc__ :获取类的文档信息
- __name__ :获取类的名称,如果在模块中,获取模块名字
- __bases__ :获取某个类的所有父类,以元组形式显示

# 7. 类的常用魔术方法
- 魔术方法不需要人为调用,在一定条件下会自动触发
- 魔术方法统一的特征: 方法名前后有__
- 操作类
    - __init__: 构造函数
    - __new__: 可以实例化方法,他的调用在__init__前,一般不使用,有可能丢失对象
    - __call__: 对象当做函数使用时触发
    - __str__: 当对象当做字符串时调用
    - __repr__: 返回字符串,区别查百度
- 描述符相关
    - __set__: 
    - __get__:
    - __delete__:
- 属性相关
    - __getattr__: 访问一个不存在的属性时触发
    - __setattr__: 对成员属性进行设置时触发
        - 参数:
            - self:用来获取当前对象
            - 被设置的属性名称
            - 需要对属性名称设置的值
        - 作用: 进行设置时可以进行验证或修改
        - 注意: 在方法中不能对属性直接赋值操作,否则为死循环
- 运算类
    - __gt__: 进行大于判断时触发
        - 参数:
            - self
            - 第二个参数是第二个对象
            - 返回值可以任意
            
# 8. 类和对象的三种方法
- 实例方法
    - 需要实例化之后才能用的方法
- 静态方法
    - 不需要实例化,通过类直接访问
- 类方法
    - 也不要实例化
- 具体区别百度

# 9. 抽象类
- 抽象方法: 没有具体实现内容的方法
- 抽象方法主要意义是规范子类的行为和接口
- 抽象类的使用主要借助于abc模块

                import abc
                
- 抽象类: 包含抽象方法的类叫抽象类,简称abc
- 抽象类的使用:
    - 抽象类可以包含抽象方法, 也可以包含具体方法
    - 抽象类不能实例化
    - 必须继承才能使用,且他的子类必须实现他的所有抽象方法
    - 如果子类没有实现所有抽象方法,则子类也不能实例化
    - 这玩意主要是定义一个标准,方便编程
    
# 10. 自定义类
- 类其实是一个类定义和各种方法的自由组合
- 借助赋值
- 借助MethodType
- 借助Type
- 借助元类MetaClass
    - 元组是类
    - 用来创造别的类